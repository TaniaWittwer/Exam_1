"0","#rename to avoid 'variable not found' problem"
"0","conviction <- rename(conviction, id = icpsr_seq_id_number)"
"0","#make a wide table"
"0","conviction_spread <- "
"0","  spread(data = conviction, key = id, value = convicted)"
"0","#select only variable containing conviction as adult or juvenile"
"0","conviction2a <- conviction_spread[6,]"
"0","conviction2b <- conviction_spread[7,]"
"0","#make a long table and rename to avoid matching error and for clarity"
"0","conviction3a <- "
"0","  gather(conviction2a, key = id, value = agecat) %>% "
"0","  rename(as_adult = agecat)"
"0","conviction3b <- "
"0","  gather(conviction2b, key = id, value = agecat) %>% "
"0","  rename(as_juvenile = agecat)"
"0","#merge two tables"
"0","conviction_merge <- left_join(conviction3a, conviction3b, by = ""id"")"
"0","#create a new binary variable as convicted versus never convicted, resulting on if not convicted as adult (=1) and as juvenile(=1), then not convicted (=1), otherwise convicted (=2)"
"0","conviction_merge$convicted <- if_else(conviction_merge$as_adult == 1 & conviction_merge$as_juvenile == 1, 1, 2)"
"0","conviction_merge$convicted <- factor(conviction_merge$convicted,"
"0","                              levels = c(1,2),"
"0","                              labels = c(""never"", ""atleastonce""))"
